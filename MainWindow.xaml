<Window x:Class="AI.KB.Assistant.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:conv="clr-namespace:AI.KB.Assistant.Helpers"
        Title="AI 知識庫助手"
        Height="720" Width="1200"
        WindowStartupLocation="CenterScreen"
        AllowDrop="True"
        DragEnter="Window_DragEnter"
        Drop="Window_Drop">

    <Window.Resources>
        <!-- Unix 秒數 → yyyy-MM-dd -->
        <conv:UnixToDateConverter x:Key="UnixToDateConverter"/>
    </Window.Resources>

    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Toolbar -->
            <RowDefinition Height="*"/>
            <!-- List -->
            <RowDefinition Height="180"/>
            <!-- Log -->
        </Grid.RowDefinitions>

        <!-- Toolbar -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,0,8">
            <Button x:Name="BtnRecent"   Content="最近"        Width="80" Margin="0,0,8,0" Click="BtnRecent_Click"/>
            <Button x:Name="BtnPending"  Content="待整理"      Width="80" Margin="0,0,8,0" Click="BtnPending_Click"/>
            <Button x:Name="BtnProgress" Content="進行中"      Width="80" Margin="0,0,16,0" Click="BtnProgress_Click"/>

            <TextBox x:Name="SearchBox"
                     Width="320" Height="28"
                     VerticalContentAlignment="Center"
                     Margin="0,0,8,0"
                     KeyDown="SearchBox_KeyDown"/>
            <Button x:Name="BtnSearch" Content="搜尋" Width="80" Click="BtnSearch_Click"/>

            <Separator Width="24"/>

            <Button x:Name="BtnSettings" Content="設定" Width="80" Click="BtnSettings_Click"/>
            <Button x:Name="BtnHelp"     Content="使用教學" Width="100" Click="BtnHelp_Click"/>
        </StackPanel>

        <!-- Items -->
        <ListView x:Name="LvItems" Grid.Row="1">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="檔名"      DisplayMemberBinding="{Binding Filename}" Width="300"/>
                    <GridViewColumn Header="分類"      DisplayMemberBinding="{Binding Category}" Width="120"/>
                    <GridViewColumn Header="信心度"    DisplayMemberBinding="{Binding Confidence}" Width="80"/>
                    <GridViewColumn Header="建立時間"  DisplayMemberBinding="{Binding CreatedTs, Converter={StaticResource UnixToDateConverter}}" Width="140"/>
                    <GridViewColumn Header="標籤"      DisplayMemberBinding="{Binding Tags}" Width="160"/>
                    <GridViewColumn Header="專案"      DisplayMemberBinding="{Binding Project}" Width="160"/>
                </GridView>
            </ListView.View>
        </ListView>

        <!-- Log -->
        <TextBox x:Name="TxtLog" Grid.Row="2" Margin="0,8,0,0"
                 IsReadOnly="True" TextWrapping="Wrap" VerticalScrollBarVisibility="Auto"/>
    </Grid>
</Window>
