<Window x:Class="AI.KB.Assistant.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:conv="clr-namespace:AI.KB.Assistant.Helpers"
        Title="AI.KB.Assistant" Height="720" Width="1080"
        Background="#0b1220" Foreground="#f4f4f4"
        FontFamily="Segoe UI, Microsoft JhengHei">

    <!-- 資源區：放 Converter -->
    <Window.Resources>
        <conv:UnixToDateConverter x:Key="UnixToDateConverter"/>
    </Window.Resources>

    <DockPanel>
        <!-- 頂部功能列 -->
        <Border DockPanel.Dock="Top" Background="#0f1628" Padding="8">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" >
                <Button Content="重新整理" Width="100" Margin="4" Click="BtnReload_Click"/>
                <Button Content="設定" Width="100" Margin="4" Click="BtnSettings_Click"/>
                <Button Content="說明" Width="100" Margin="4" Click="BtnHelp_Click"/>
            </StackPanel>
        </Border>

        <!-- 左邊分類樹 -->
        <Border DockPanel.Dock="Left" Background="#0f1628" Padding="8" Width="220">
            <TreeView x:Name="TreeCategories"/>
        </Border>

        <!-- 主要檔案清單 -->
        <Grid Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="120"/>
            </Grid.RowDefinitions>

            <!-- 檔案列表 -->
            <ListView x:Name="ListFiles" Grid.Row="0" Margin="0,0,0,8" 
                      Background="#111827" BorderThickness="0" Foreground="#f4f4f4">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="檔名" Width="320" 
                                        DisplayMemberBinding="{Binding Filename}"/>
                        <GridViewColumn Header="分類" Width="140" 
                                        DisplayMemberBinding="{Binding Category}"/>
                        <GridViewColumn Header="狀態" Width="100" 
                                        DisplayMemberBinding="{Binding Status}"/>
                        <!-- 使用 Converter 將 Unix 時間轉換成 yyyy-MM-dd -->
                        <GridViewColumn Header="建立日期" Width="140">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding CreatedTs, Converter={StaticResource UnixToDateConverter}}"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                    </GridView>
                </ListView.View>
            </ListView>

            <!-- 日誌區 -->
            <TextBox x:Name="TxtLog" Grid.Row="1" Background="#0f1628"
                     Foreground="#f4f4f4" BorderThickness="0"
                     FontFamily="Consolas" FontSize="12"
                     IsReadOnly="True" TextWrapping="Wrap"
                     VerticalScrollBarVisibility="Auto"/>
        </Grid>
    </DockPanel>
</Window>
