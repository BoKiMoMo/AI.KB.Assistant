<Window x:Class="AI.KB.Assistant.Views.LauncherWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="AI.KB.Assistant - 啟動器"
        Height="680" Width="820"
        WindowStartupLocation="CenterScreen"
        Background="{DynamicResource App.BackgroundBrush}"
        Foreground="{DynamicResource App.TextBrush}"
        ResizeMode="NoResize">

    <Window.Resources>
        <!-- 共用按鈕樣式（沿用 Main 風格） -->
        <Style x:Key="TonedBtn" TargetType="Button">
            <Setter Property="Padding" Value="14,10"/>
            <Setter Property="Margin" Value="0,8,0,0"/>
            <Setter Property="Background" Value="{DynamicResource App.PanelBrush}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource App.BorderBrush}"/>
            <Setter Property="Foreground" Value="{DynamicResource App.TextBrush}"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
        </Style>

        <!-- V7.35 新增：用於清理按鈕的小型按鈕樣式 -->
        <Style x:Key="SmallBtn" TargetType="Button">
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="Margin" Value="0,8,0,0"/>
            <Setter Property="Background" Value="{DynamicResource App.PanelBrush}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource App.BorderBrush}"/>
            <Setter Property="Foreground" Value="{DynamicResource App.TextBrush}"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
        </Style>

        <!-- 大卡片 -->
        <Style x:Key="Card" TargetType="Border">
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="Padding" Value="18"/>
            <Setter Property="Margin" Value="10"/>
            <Setter Property="Background" Value="{DynamicResource App.PanelBrush}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource App.BorderBrush}"/>
            <!-- [V20.3] 錯誤修正：將 "1V" 修正為 "1" -->
            <Setter Property="BorderThickness" Value="1"/>
        </Style>

        <!-- 卡片標題 -->
        <Style x:Key="CardTitle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="24"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,0,4"/>
        </Style>

        <!-- 卡片描述 -->
        <Style x:Key="CardDesc" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="{DynamicResource App.TextMutedBrush}"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
        </Style>
    </Window.Resources>

    <DockPanel>
        <!-- 標題 -->
        <Border DockPanel.Dock="Top" Padding="20,16"
                BorderBrush="{DynamicResource App.BorderBrush}" BorderThickness="0,0,0,1">
            <TextBlock FontSize="20" FontWeight="SemiBold">
                <Run Text="AI.KB.Assistant"/>
                <Run Text="— 簡易啟動介面" Foreground="{DynamicResource App.TextMutedBrush}" FontSize="18"/>
            </TextBlock>
        </Border>

        <!-- 主體 -->
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- 四顆按鈕 -->
            <UniformGrid Grid.Row="0" Columns="2" Rows="2">
                <!-- 1. 自動分類 (V20.2 修改) -->
                <Border Style="{StaticResource Card}">
                    <StackPanel>
                        <TextBlock Style="{StaticResource CardTitle}" Text="⚡ 自動分類"/>
                        <TextBlock Style="{StaticResource CardDesc}" MinHeight="40" Text="掃描收件夾，建立清單並自動分類搬移。"/>

                        <!-- [V20.2] 將一個按鈕替換為兩個 -->
                        <UniformGrid Columns="2" Margin="0,8,0,0">
                            <Button x:Name="BtnScanShallow" 
                                    Content="僅分類頂層" 
                                    Style="{StaticResource TonedBtn}" 
                                    Margin="0,0,4,0" FontSize="16" Padding="10,8" 
                                    Click="BtnScanShallow_Click"/>
                            <Button x:Name="BtnScanRecursive" 
                                    Content="分類全部(含子資料夾)" 
                                    Style="{StaticResource TonedBtn}" 
                                    Margin="4,0,0,0" FontSize="16" Padding="10,8" 
                                    Click="BtnScanRecursive_Click"/>
                        </UniformGrid>

                    </StackPanel>
                </Border>

                <!-- 2. 收件夾 (V7.35 修正) -->
                <Border Style="{StaticResource Card}">
                    <StackPanel>
                        <TextBlock Style="{StaticResource CardTitle}" Text="🗂 收件夾"/>
                        <TextBlock Style="{StaticResource CardDesc}" Text="開啟 HotFolder (收件夾) 實體資料夾，或執行清理。"/>

                        <!-- V7.35 新功能：清理按鈕 -->
                        <UniformGrid Columns="2" Margin="0,8,0,0">
                            <Button x:Name="BtnResetInbox" Content="🔄 刪除未處理紀錄" Margin="0,0,4,0" 
                                    Style="{StaticResource SmallBtn}"
                                    ToolTip="[選項C] 清除資料庫中所有未處理 (Intaked/Error) 的紀錄，以便下次重新掃描 (不刪除檔案)" 
                                    Click="BtnResetInbox_Click"/>
                            <Button x:Name="BtnClearCommitted" Content="🗑️ 刪除以分類檔案" Margin="4,0,0,0" 
                                    Style="{StaticResource SmallBtn}"
                                    ToolTip="[選項B] 永久刪除 HotFolder 中已搬移 (Committed) 的實體檔案 (用於「複製」模式)" 
                                    Click="BtnClearCommitted_Click"/>
                        </UniformGrid>

                        <Button Content="開啟資料夾" Style="{StaticResource TonedBtn}" Click="BtnOpenInbox_Click"/>
                    </StackPanel>
                </Border>

                <!-- 3. 詳細版 -->
                <Border Style="{StaticResource Card}">
                    <StackPanel>
                        <TextBlock Style="{StaticResource CardTitle}" Text="🖼 詳細版"/>
                        <TextBlock Style="{StaticResource CardDesc}" MinHeight="40" Text="進入完整操作介面 (樹/清單/AI 面板)。"/>
                        <Button Content="進入" Style="{StaticResource TonedBtn}" Click="BtnOpenDetailed_Click"/>
                    </StackPanel>
                </Border>

                <!-- 4. 設定 -->
                <Border Style="{StaticResource Card}">
                    <StackPanel>
                        <TextBlock Style="{StaticResource CardTitle}" Text="⚙ 設定"/>
                        <TextBlock Style="{StaticResource CardDesc}" MinHeight="40" Text="路徑 / 黑名單 / 門檻 / 啟動模式。"/>
                        <Button Content="開啟設定" Style="{StaticResource TonedBtn}" Click="BtnOpenSettings_Click"/>
                    </StackPanel>
                </Border>
            </UniformGrid>

            <!-- 可收闔日誌 -->
            <Expander Grid.Row="1" Header="日誌 (Log)" IsExpanded="False"
                      Margin="10,0,10,0"
                      BorderBrush="{DynamicResource App.BorderBrush}" BorderThickness="0,1,0,0">
                <TextBox x:Name="TxtStatusLog" IsReadOnly="True" 
                         Height="120"
                         VerticalScrollBarVisibility="Auto"
                         Background="{DynamicResource App.LogBrush}"
                         Foreground="{DynamicResource App.TextMutedBrush}"
                         FontFamily="Consolas" FontSize="12"/>
            </Expander>

            <!-- 底部路徑摘要 -->
            <Border Grid.Row="2" Padding="10"
                    Background="{DynamicResource App.PanelBrush}"
                    BorderBrush="{DynamicResource App.BorderBrush}" BorderThickness="0,1,0,0">
                <StackPanel>
                    <TextBlock Text="目前環境：" FontWeight="Bold"/>
                    <WrapPanel Margin="0,6,0,0">
                        <TextBlock Text="ROOT：" Foreground="{DynamicResource App.TextMutedBrush}"/>
                        <TextBlock x:Name="TxtRoot" Margin="6,0,18,0"/>
                        <TextBlock Text="INBOX：" Foreground="{DynamicResource App.TextMutedBrush}"/>
                        <TextBlock x:Name="TxtInbox" Margin="6,0,18,0"/>
                        <TextBlock Text="DESKTOP：" Foreground="{DynamicResource App.TextMutedBrush}"/>
                        <TextBlock x:Name="TxtDesktop" Margin="6,0,18,0"/>
                        <TextBlock Text="DB：" Foreground="{DynamicResource App.TextMutedBrush}"/>
                        <TextBlock x:Name="TxtDb" Margin="6,0,0,0" ToolTipService.ToolTip="{Binding Text, RelativeSource={RelativeSource Self}}"/>
                    </WrapPanel>
                </StackPanel>
            </Border>
        </Grid>
    </DockPanel>
</Window>