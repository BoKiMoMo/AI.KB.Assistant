<Window x:Class="AI.KB.Assistant.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="設定" Height="640" Width="880"
        WindowStartupLocation="CenterOwner"
        Background="#0b1220" Foreground="#f4f4f4"
        FontFamily="Segoe UI, Microsoft JhengHei">
    <DockPanel>
        <Border DockPanel.Dock="Bottom" Background="#0f1628" Padding="10">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="取消" Width="100" Margin="0,0,8,0" Click="Cancel_Click"/>
                <Button Content="儲存" Width="120" Click="Save_Click"/>
            </StackPanel>
        </Border>

        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="20">
                <!-- App -->
                <TextBlock Text="應用程式" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,8"/>
                <StackPanel Orientation="Horizontal" Margin="0,4">
                    <TextBlock Text="根目錄：" Width="160" VerticalAlignment="Center"/>
                    <TextBox x:Name="TxtRootDir" Width="520"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,4">
                    <TextBlock Text="收件匣：" Width="160" VerticalAlignment="Center"/>
                    <TextBox x:Name="TxtInboxDir" Width="520"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,4">
                    <TextBlock Text="資料庫：" Width="160" VerticalAlignment="Center"/>
                    <TextBox x:Name="TxtDbPath" Width="520"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,4">
                    <TextBlock Text="搬移模式：" Width="160" VerticalAlignment="Center"/>
                    <ComboBox x:Name="CmbMoveMode" Width="180">
                        <ComboBoxItem Content="move"/>
                        <ComboBoxItem Content="copy"/>
                    </ComboBox>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,4">
                    <TextBlock Text="覆寫策略：" Width="160" VerticalAlignment="Center"/>
                    <ComboBox x:Name="CmbOverwrite" Width="180">
                        <ComboBoxItem Content="overwrite"/>
                        <ComboBoxItem Content="skip"/>
                        <ComboBoxItem Content="rename"/>
                    </ComboBox>
                </StackPanel>
                <CheckBox x:Name="ChkDryRun" Content="乾跑（只模擬不搬檔）" Margin="160,4,0,8"/>

                <Separator Margin="0,8"/>

                <!-- Routing -->
                <TextBlock Text="路徑與命名" FontSize="18" FontWeight="SemiBold" Margin="0,8,0,8"/>
                <StackPanel Orientation="Horizontal" Margin="0,4">
                    <TextBlock Text="路徑樣板：" Width="160" VerticalAlignment="Center"/>
                    <TextBox x:Name="TxtPathTemplate" Width="520"/>
                </StackPanel>
                <CheckBox x:Name="ChkSafeCategories" Content="僅允許安全清單中的分類" Margin="160,4,0,8"/>

                <Separator Margin="0,8"/>

                <!-- Classification -->
                <TextBlock Text="AI 分類" FontSize="18" FontWeight="SemiBold" Margin="0,8,0,8"/>
                <StackPanel Orientation="Horizontal" Margin="0,4">
                    <TextBlock Text="引擎：" Width="160" VerticalAlignment="Center"/>
                    <ComboBox x:Name="CmbEngine" Width="180">
                        <ComboBoxItem Content="rules"/>
                        <ComboBoxItem Content="llm"/>
                        <ComboBoxItem Content="hybrid"/>
                    </ComboBox>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,4">
                    <TextBlock Text="風格：" Width="160" VerticalAlignment="Center"/>
                    <TextBox x:Name="TxtStyle" Width="520"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,4">
                    <TextBlock Text="信心度(0~1)：" Width="160" VerticalAlignment="Center"/>
                    <Slider x:Name="SldThreshold" Minimum="0" Maximum="1" Width="320"
                            TickFrequency="0.05" IsSnapToTickEnabled="True"/>
                    <TextBlock x:Name="LblThreshold" Width="80" Margin="8,0,0,0" VerticalAlignment="Center"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,4">
                    <TextBlock Text="預設類別：" Width="160" VerticalAlignment="Center"/>
                    <TextBox x:Name="TxtFallback" Width="320"/>
                </StackPanel>

                <TextBlock Text="自訂分類清單：" Margin="0,8,0,4"/>
                <StackPanel Orientation="Horizontal">
                    <TextBox x:Name="TxtNewTag" Width="320"/>
                    <Button Content="新增" Width="80" Margin="8,0,0,0" Click="AddTag_Click"/>
                    <Button Content="移除所選" Width="100" Margin="8,0,0,0" Click="RemoveTag_Click"/>
                </StackPanel>
                <ListBox x:Name="LstTaxonomy" Height="100" Margin="0,4,0,0"/>

                <Separator Margin="0,8"/>

                <!-- OpenAI -->
                <TextBlock Text="OpenAI" FontSize="18" FontWeight="SemiBold" Margin="0,8,0,8"/>
                <StackPanel Orientation="Horizontal" Margin="0,4">
                    <TextBlock Text="模型：" Width="160" VerticalAlignment="Center"/>
                    <TextBox x:Name="TxtModel" Width="240"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,4">
                    <TextBlock Text="API Key：" Width="160" VerticalAlignment="Center"/>
                    <PasswordBox x:Name="PwdApiKey" Width="320"/>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>
    </DockPanel>
</Window>
