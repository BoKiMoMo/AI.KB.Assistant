<Window x:Class="AI.KB.Assistant.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="設定" Height="560" Width="720"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto">
            <StackPanel Orientation="Vertical" Margin="0,0,0,8" Width="660">

                <!-- 資料庫 / 根路徑 -->
                <GroupBox Header="資料庫 / 根路徑" Margin="0,0,0,12">
                    <Grid Margin="8">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="8"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="8"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="8"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="資料庫：" VerticalAlignment="Center"/>
                        <TextBox   Grid.Row="0" Grid.Column="2" x:Name="TxtDbPath" />
                        <Button    Grid.Row="0" Grid.Column="4" Content="瀏覽…" Click="BtnBrowseDb_Click" MinWidth="80"/>

                        <TextBlock Grid.Row="2" Grid.Column="0" Text="根路徑：" VerticalAlignment="Center"/>
                        <TextBox   Grid.Row="2" Grid.Column="2" x:Name="TxtRoot" />
                        <Button    Grid.Row="2" Grid.Column="4" Content="瀏覽…" Click="BtnBrowseRoot_Click" MinWidth="80"/>
                    </Grid>
                </GroupBox>

                <!-- 收件夾（Hot Folder） -->
                <GroupBox Header="收件夾（Hot Folder）" Margin="0,0,0,12">
                    <Grid Margin="8">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="8"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="8"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="8"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="8"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="8"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="8"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <CheckBox Grid.Row="0" Grid.ColumnSpan="5" x:Name="CbEnableHot" Content="啟用收件夾監控"/>

                        <TextBlock Grid.Row="2" Grid.Column="0" Text="收件夾：" VerticalAlignment="Center"/>
                        <TextBox   Grid.Row="2" Grid.Column="2" x:Name="TxtHotPath"/>
                        <Button    Grid.Row="2" Grid.Column="4" Content="瀏覽…" Click="BtnBrowseHot_Click" MinWidth="80"/>

                        <CheckBox Grid.Row="4" Grid.ColumnSpan="5" x:Name="CbIncludeSubdir" Content="包含子資料夾"/>
                        <CheckBox Grid.Row="6" Grid.ColumnSpan="5" x:Name="CbAutoOnDrop" Content="拖放到收件夾時自動預分類"/>

                        <StackPanel Grid.Row="8" Grid.ColumnSpan="5" Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBlock Text="搬移模式：" VerticalAlignment="Center"/>
                            <ComboBox x:Name="CmbMoveMode" Width="130" Margin="8,0,16,0">
                                <ComboBoxItem Content="移動（Move）"   Tag="Move"/>
                                <ComboBoxItem Content="複製（Copy）"    Tag="Copy"/>
                            </ComboBox>
                            <TextBlock Text="重名處理：" VerticalAlignment="Center"/>
                            <ComboBox x:Name="CmbOverwrite" Width="160" Margin="8,0,0,0">
                                <ComboBoxItem Content="取代（Replace）" Tag="Replace"/>
                                <ComboBoxItem Content="重新命名（Rename）" Tag="Rename"/>
                            </ComboBox>
                        </StackPanel>
                    </Grid>
                </GroupBox>

                <!-- 分類路由 -->
                <GroupBox Header="分類路由" Margin="0,0,0,12">
                    <StackPanel Margin="8,4,8,8">
                        <WrapPanel>
                            <CheckBox x:Name="CbYear"    Content="年份"  Margin="0,0,16,0"/>
                            <CheckBox x:Name="CbMonth"   Content="月份"  Margin="0,0,16,0"/>
                            <CheckBox x:Name="CbProject" Content="專案"  Margin="0,0,16,0"/>
                            <CheckBox x:Name="CbType"    Content="型態"/>
                        </WrapPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                            <TextBlock Text="信心不足時預設分類夾：" VerticalAlignment="Center"/>
                            <TextBox x:Name="TxtAutoFolder" Width="180" Margin="8,0,0,0"/>
                        </StackPanel>
                    </StackPanel>
                </GroupBox>

                <!-- LLM -->
                <GroupBox Header="LLM（低信心輔助）">
                    <StackPanel Margin="8">
                        <CheckBox x:Name="CbLlmLowConf" Content="信心低於門檻時啟用 LLM 協助"/>
                        <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                            <TextBlock Text="API Key：" VerticalAlignment="Center"/>
                            <PasswordBox x:Name="TxtApiKey" Width="220" Margin="8,0,16,0"/>
                            <TextBlock Text="Base URL：" VerticalAlignment="Center"/>
                            <TextBox x:Name="TxtBaseUrl" Width="220" Margin="8,0,16,0"/>
                            <TextBlock Text="Model：" VerticalAlignment="Center"/>
                            <TextBox x:Name="TxtModel" Width="160" Margin="8,0,0,0"/>
                        </StackPanel>
                    </StackPanel>
                </GroupBox>

            </StackPanel>
        </ScrollViewer>

        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="儲存" Click="BtnSave_Click" Width="100" Margin="0,8,8,0"/>
            <Button Content="取消" Click="BtnCancel_Click" Width="100" Margin="0,8,0,0"/>
        </StackPanel>
    </Grid>
</Window>
